---
categories:
  - Infrastructure
  - Aws
tags:
  - Aws
---

# EC2

-- Amazon EC2 -- は、AWSが提供する仮想化環境上で稼働する仮想サーバー。EC2の稼働時間によって料金が課金される、従来課金型が基本となる。

## EC2の機能

- インスタンス: 仮想コンピューティング環境
- Amazon Machine Image(AMI): サーバーに必要なビットをパッケージ化した、インスタンス用に事前に設定されたテンプレート
- インスタンスタイプ: インスタンス用のCPU、メモリ、ストレージ、ネットワーキングキャパシティーの様々な構成
- キーペアを使用したインスタンス用の安全なログイン情報(AWSはパブリックキーを保存し、ユーザーはプライベートキーを安全な場所に保存する)
- インスタンスストアボリューム: インスタンスを停止、休止、または終了するときに削除される一時データ用のストレージボリューム
- Amazon EBSボリューム: Amazon Elastic Block Store(Amazon EBS) を使用したデータ用の永続化ストレージボリューム
- リージョンおよびアベイラビリティーゾーン: インスタンスやAmazon EBSボリュームなどのリソース用の複数の物理的な場所
- セキュリティグループを使用してインスタンスに到達可能で、プロトコル、ポート、ソースIP範囲を指定できるファイアウォール
- Elastic IPアドレス: 動的クラウドコンピューティング用の静的なIPv4アドレス
- タグ: Amazon EC2リソースに割り当てることが出液るメタデータ
- 仮想プライベートクラウド(VPC): AWSクラウドから論理的に分離され、ユーザー独自のネットワークにオプションで接続できる仮想ネットワーク

## セットアップ

### キーペアの作成

1. Amazon EC2 コンソールにログイン(https://console.aws.amazon.com/ec2/)
2. ナビゲーションで、-- キーペア -- を選択する
3. -- キーペアの作成 -- を選択する
4. -- Name(名前) -- にキーペアの名前を入力する。(最大255文字のASCII文字、先頭または末尾にスペースを含めることはできない)
5. -- File Format(ファイル形式) -- プライベートキーを保存する形式を選択する。
6. -- キーペアの作成 -- を選択する
7. ブラウザから秘密キーファイルがダウンロードされる(一度切り)
8. SSHクライアントを使用してLinuxインスタンスに接続する場合、プライベートキーファイルにアクセス許可を設定する

```
$ chmod 400 my-key-pair.pem
```

### セキュリティグループの作成

SSHを利用できるIPアドレスをセキュリティグループで制限する

1. Amazon EC2 コンソールにログイン(https://console.aws.amazon.com/ec2/)
2. ナビゲーションバーで、セキュリティグループのリージョンを選択する。キーペアを作成したリージョンと同じリージョンを選択する。
3. ナビゲーションペインで、-- Security Groups -- を選択する。
4. -- セキュリティグループの作成 -- を選択する。
5. -- 基本的な詳細 -- で次の操作を行う
  a. 新しいセキュリティグループの名前と説明を入力する 
  b. -- VPC -- リストで、リージョンのデフォルトVPCを選択する。
6. -- インバウンドルール -- で、インスタンスに到達する特定のトラフィックを許可するルールを作成する
7. -- アウトバウンドルール -- はデフォルトのルールをそのまま適用する
8. -- セキュリティグループの作成 -- を選択する。
